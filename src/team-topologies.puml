' Team Topologies PlantUML Extension
' Version: 0.1.0
' License: MIT
' Repository: https://github.com/pcresswell/StartTT
'
' A PlantUML extension for creating Team Topologies diagrams
' Based on the book "Team Topologies" by Matthew Skelton and Manuel Pais

' Namespace declarations to avoid conflicts
!define TEAMTOPO_PUML
!define TEAMTOPO_VERSION "1.0.0"

' Default values
!$TEAM_BG_COLOR ?= "#FFFFFF"
!$TEAM_BORDER_COLOR ?= "#333333"
!$TEAM_FONT_COLOR ?= "#333333"
!$TEAM_FONT_SIZE ?= 14

' Team Type Colors
!$TEAM_ALIGNED_COLOR ?= "#2196F3"    ' Stream-aligned team (blue)

' Basic skinparam settings
skinparam defaultTextAlignment center

' Element Styles
skinparam rectangle {
  BackgroundColor $TEAM_BG_COLOR
  BorderColor $TEAM_BORDER_COLOR
  FontColor $TEAM_FONT_COLOR
  FontSize $TEAM_FONT_SIZE
}

' Stream-aligned Team style
skinparam rectangle<<aligned>> {
  BackgroundColor $TEAM_ALIGNED_COLOR
  BorderColor $TEAM_ALIGNED_COLOR
  FontColor white
  RoundCorner 20
  Shadowing false
  Padding 15
}

' Basic team definition
!unquoted procedure Team($label)
  rectangle "$label"
!endprocedure

' Stream-aligned team
!unquoted procedure Team_Aligned($alias, $label)
  rectangle "$label" as $alias <<aligned>> #$TEAM_ALIGNED_COLOR
!endprocedure

' Stream-aligned team with description
!unquoted procedure Team_Aligned($alias, $label, $descr)
  rectangle "$label\n\n<size:12>[$descr]</size>" as $alias <<aligned>> #$TEAM_ALIGNED_COLOR
!endprocedure